# Hotels
- Hotels service

[![Build Status](https://travis-ci.org/MohamedFawzy/hotels.svg?branch=master)](https://travis-ci.org/MohamedFawzy/hotels)


[![Maintainability](https://api.codeclimate.com/v1/badges/9eb1f9c146b11e2fec8c/maintainability)](https://codeclimate.com/github/MohamedFawzy/hotels/maintainability)
# Description :
Hotels CRUD service api . 
- Consul used to register services such as php-fpm , nginx
- Link each service to service registry .
- Monitor health check and reload service if it's down .

# Perquisite
- Docker installed on your machine .


# Install
- `git clone https://github.com/MohamedFawzy/hotels.git`
- `cd hotels`
- `cd docker`
- `docker-compose up`
- You should see the following image
![alt text](https://raw.githubusercontent.com/MohamedFawzy/hotels/master/images/consul.png)
- Open your browser at `http://localhost:8500` you should see registered services up and running .
![alt text](https://raw.githubusercontent.com/MohamedFawzy/hotels/master/images/consul-interface.png)

- Open docker container for php-fpm with the following command `docker exec -it docker_microservice_hotels_fpm_1 /bin/bash`
- Install composer packages `composer install`
- copy `source/.env.example` to `.env.` change to the following
  
  ```
  DB_CONNECTION=mongodb
  
    DB_HOST=mongodb
    
    DB_PORT=27017
    
    DB_DATABASE=hotels
    
    DB_USERNAME=
    
    DB_PASSWORD=
    ```

- Open fpm container `docker exec -it docker_microservice_hotels_fpm_1 /bin/bash` 
        then 
        1- `php artisan key:generate`
        2- `php artisan config:cache`
        3- `php artisan db:seed`
        4- `./frontend.sh`
- Use any mongo database GUI tool to access collection or login to `docker exec -it mongodb /bin/bash` then `mongo` , `use hotels`, `db.hotels.find({}).pretty()` you should see collection of documents for hotels generated by seed

# References:

- https://www.consul.io/intro/index.html
- https://www.docker.com/
